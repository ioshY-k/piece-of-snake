[gd_scene load_steps=47 format=4 uid="uid://c5ds1gbyf4iit"]

[ext_resource type="Script" uid="uid://b35ax3d027tq5" path="res://MainMenu/main_menu.gd" id="1_hy30b"]
[ext_resource type="Texture2D" uid="uid://coepahhdrkhhr" path="res://MainMenu/BackgroundTexture.svg" id="2_3w4mj"]
[ext_resource type="Texture2D" uid="uid://1om1xoukgi4l" path="res://MainMenu/CharacterSelect/CharacterSelectTileset.svg" id="3_5de1l"]
[ext_resource type="Script" uid="uid://bxtwe3vmh1r3t" path="res://MainMenu/CharacterSelect/character_selection.gd" id="3_ajn5b"]
[ext_resource type="Texture2D" uid="uid://dcucqju6dohb1" path="res://MainMenu/CharacterSelect/Char1Mask.png" id="8_qmlj8"]
[ext_resource type="Shader" uid="uid://c23kf1475ne7u" path="res://Shader/invisibility_shader.gdshader" id="14_wbgrs"]
[ext_resource type="Texture2D" uid="uid://cor381dwomr73" path="res://Snake/Body/SnakeDeco.svg" id="15_a07ub"]
[ext_resource type="Texture2D" uid="uid://bwbi37uu0dba8" path="res://Snake/Body/SnakeDecoSingle.svg" id="16_0sxtl"]

[sub_resource type="Animation" id="Animation_ajn5b"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Background:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-556, -492)]
}

[sub_resource type="Animation" id="Animation_5de1l"]
resource_name = "background_scroll_anim"
length = 10.0
loop_mode = 1
step = 1.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Background:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 10),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(-106, -42), Vector2(-556, -492)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_po2gx"]
_data = {
&"RESET": SubResource("Animation_ajn5b"),
&"background_scroll_anim": SubResource("Animation_5de1l")
}

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_8n28k"]
texture = ExtResource("3_5de1l")
texture_region_size = Vector2i(80, 80)
2:0/0 = 0
2:1/0 = 0
2:2/0 = 0
0:3/0 = 0
1:3/0 = 0
0:0/0 = 0
1:0/0 = 0
1:2/0 = 0
0:2/0 = 0
0:1/0 = 0

[sub_resource type="TileSet" id="TileSet_iej5p"]
tile_size = Vector2i(80, 80)
sources/1 = SubResource("TileSetAtlasSource_8n28k")

[sub_resource type="GDScript" id="GDScript_id3bs"]
script/source = "extends TileMapLayer

signal next_tile_reached
var snake_anim_plays: bool = false
var decreasing_menu_snake_speed: float

@onready var tail_follow: PathFollow2D = $Path2D/TailFollow
@onready var head_follow: PathFollow2D = $Path2D/HeadFollow
var bodyparts: Array

func _ready() -> void:
	decreasing_menu_snake_speed = get_parent().menu_snake_speed
	
	for child in get_children():
		if child.get_groups().has(\"Snake\"):
			bodyparts.append(child)

func play_snake_anim():
	snake_anim_plays = true
	for i in bodyparts.size()+1:
		if i < bodyparts.size():
			bodyparts[i].hide()
			show_bodypart_later(bodyparts[i], decreasing_menu_snake_speed * 2)
		next_tile_reached.emit()
		var tween = create_tween().set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT).set_parallel()
		tween.tween_property(tail_follow, \"progress\", tail_follow.progress+80,decreasing_menu_snake_speed)
		tween.tween_property(head_follow, \"progress\", head_follow.progress+80,decreasing_menu_snake_speed)
		decreasing_menu_snake_speed += 0.015
		await tween.finished
	decreasing_menu_snake_speed = get_parent().menu_snake_speed
	snake_anim_plays = false

func show_bodypart_later(part: Node, delay_time: float) -> void:
	await get_tree().create_timer(delay_time).timeout
	part.show()
"

[sub_resource type="Curve2D" id="Curve2D_b3er0"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, -40, 40, 0, 0, 0, 0, -120, 40, 0, 0, 0, 0, -280, 40, 0, 0, 0, 0, -280, -120, 0, 0, 0, 0, 80, -120)
}
point_count = 5

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_qmlj8"]
load_path = "res://.godot/imported/snake_tail_placeholder.svg-3f419f2be8c5260f8b4d72c82e939ebe.ctex"

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_e240q"]
load_path = "res://.godot/imported/snake_head_placeholder.svg-370aac8a6b87219d36ab95aaef65374d.ctex"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dbhad"]

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_5x28t"]
load_path = "res://.godot/imported/GodoticonEdge.svg-7f70a5e692f4a9cf1d543490d1fb54a7.ctex"

[sub_resource type="GDScript" id="GDScript_gcf2c"]
script/source = "class_name SnakeBodyCharSelect extends Sprite2D


enum DIRECTION {UP,RIGHT,DOWN,LEFT,STOP}
enum BODY_TYPE {STRAIGHT_U, STRAIGHT_R, STRAIGHT_D, STRAIGHT_L, CORNER_UR, CORNER_DR, CORNER_DL, CORNER_UL}
@export var is_corner: bool
const snake_body_scene = preload(\"res://Snake/Body/snake_body.tscn\")

var character_select
@onready var snake_body_deco_edge: Sprite2D = $SnakeBodyDecoEdge
@onready var snake_body_deco_corner1: Sprite2D = $SnakeBodyDecoCorner1
@onready var snake_body_deco_corner2: Sprite2D = $SnakeBodyDecoCorner2
@onready var corner_animation_player: AnimationPlayer = $CornerAnimationPlayer

static func new_snakebody(this_direction, next_direction) -> SnakeBody:
	var snake_body: SnakeBody = snake_body_scene.instantiate()
	snake_body.find_correct_rotation(this_direction, next_direction)
	
	return snake_body

func _ready() -> void:
	character_select = get_parent()
	
	if is_corner:
		snake_body_deco_edge.hide()
		play_corner_deco_anim_tweens()
		
	else:
		snake_body_deco_corner1.hide()
		snake_body_deco_corner2.hide()
		play_edge_deco_anim_tweens()

func play_edge_deco_anim_tweens():
	await character_select.next_tile_reached
	
	var moving_tween: Tween = create_tween()
	moving_tween.tween_property(snake_body_deco_edge, \"position:y\", - GameConsts.TILE_SIZE, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	snake_body_deco_edge.position = Vector2.ZERO

	play_edge_deco_anim_tweens()
	
func play_corner_deco_anim_tweens():
	await character_select.next_tile_reached
	
	corner_animation_player.seek(0.0, true)
	var moving_tween: Tween = create_tween()
	moving_tween.tween_method(_set_animation_progress, 0.0, corner_animation_player.current_animation_length, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	
	play_corner_deco_anim_tweens()

func _set_animation_progress(time: float):
	corner_animation_player.seek(time, true)
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_81x6j"]
shader = ExtResource("14_wbgrs")
shader_parameter/hidden_percentage = 1.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_jq760"]
shader = ExtResource("14_wbgrs")
shader_parameter/hidden_percentage = 1.0

[sub_resource type="Animation" id="Animation_krvum"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SnakeBodyDecoCorner2:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, -80)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SnakeBodyDecoCorner2:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("SnakeBodyDecoCorner1:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("SnakeBodyDecoCorner1:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.785398]
}

[sub_resource type="Animation" id="Animation_81x6j"]
resource_name = "move_tile_anim"
length = 0.38
step = 0.01
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SnakeBodyDecoCorner2:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.38),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, -80)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SnakeBodyDecoCorner2:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.08, 0.38),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.785398, 0.0, 0.0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("SnakeBodyDecoCorner1:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.38),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(-80, 0), Vector2(0, 0)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("SnakeBodyDecoCorner1:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.3, 0.38),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [1.5708, 1.5708, 0.785398]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_m5mbj"]
_data = {
&"RESET": SubResource("Animation_krvum"),
&"move_tile_anim": SubResource("Animation_81x6j")
}

[sub_resource type="ShaderMaterial" id="ShaderMaterial_t5loh"]

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_8wefa"]
load_path = "res://.godot/imported/GodoticonEdge.svg-7f70a5e692f4a9cf1d543490d1fb54a7.ctex"

[sub_resource type="GDScript" id="GDScript_cqjde"]
script/source = "class_name SnakeBodyCharSelect extends Sprite2D


enum DIRECTION {UP,RIGHT,DOWN,LEFT,STOP}
enum BODY_TYPE {STRAIGHT_U, STRAIGHT_R, STRAIGHT_D, STRAIGHT_L, CORNER_UR, CORNER_DR, CORNER_DL, CORNER_UL}
@export var is_corner: bool
const snake_body_scene = preload(\"res://Snake/Body/snake_body.tscn\")

var character_select
@onready var snake_body_deco_edge: Sprite2D = $SnakeBodyDecoEdge
@onready var snake_body_deco_corner1: Sprite2D = $SnakeBodyDecoCorner1
@onready var snake_body_deco_corner2: Sprite2D = $SnakeBodyDecoCorner2
@onready var corner_animation_player: AnimationPlayer = $CornerAnimationPlayer

static func new_snakebody(this_direction, next_direction) -> SnakeBody:
	var snake_body: SnakeBody = snake_body_scene.instantiate()
	snake_body.find_correct_rotation(this_direction, next_direction)
	
	return snake_body

func _ready() -> void:
	character_select = get_parent()
	
	if is_corner:
		snake_body_deco_edge.hide()
		play_corner_deco_anim_tweens()
		
	else:
		snake_body_deco_corner1.hide()
		snake_body_deco_corner2.hide()
		play_edge_deco_anim_tweens()

func play_edge_deco_anim_tweens():
	await character_select.next_tile_reached
	
	var moving_tween: Tween = create_tween()
	moving_tween.tween_property(snake_body_deco_edge, \"position:y\", - GameConsts.TILE_SIZE, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	snake_body_deco_edge.position = Vector2.ZERO

	play_edge_deco_anim_tweens()
	
func play_corner_deco_anim_tweens():
	await character_select.next_tile_reached
	
	corner_animation_player.seek(0.0, true)
	var moving_tween: Tween = create_tween()
	moving_tween.tween_method(_set_animation_progress, 0.0, corner_animation_player.current_animation_length, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	
	play_corner_deco_anim_tweens()

func _set_animation_progress(time: float):
	corner_animation_player.seek(time, true)
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_homfb"]

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_wbgrs"]
load_path = "res://.godot/imported/GodoticonEdge.svg-7f70a5e692f4a9cf1d543490d1fb54a7.ctex"

[sub_resource type="GDScript" id="GDScript_a07ub"]
script/source = "class_name SnakeBodyCharSelect extends Sprite2D


enum DIRECTION {UP,RIGHT,DOWN,LEFT,STOP}
enum BODY_TYPE {STRAIGHT_U, STRAIGHT_R, STRAIGHT_D, STRAIGHT_L, CORNER_UR, CORNER_DR, CORNER_DL, CORNER_UL}
@export var is_corner: bool
const snake_body_scene = preload(\"res://Snake/Body/snake_body.tscn\")

var character_select
@onready var snake_body_deco_edge: Sprite2D = $SnakeBodyDecoEdge
@onready var snake_body_deco_corner1: Sprite2D = $SnakeBodyDecoCorner1
@onready var snake_body_deco_corner2: Sprite2D = $SnakeBodyDecoCorner2
@onready var corner_animation_player: AnimationPlayer = $CornerAnimationPlayer

static func new_snakebody(this_direction, next_direction) -> SnakeBody:
	var snake_body: SnakeBody = snake_body_scene.instantiate()
	snake_body.find_correct_rotation(this_direction, next_direction)
	
	return snake_body

func _ready() -> void:
	character_select = get_parent()
	
	if is_corner:
		snake_body_deco_edge.hide()
		play_corner_deco_anim_tweens()
		
	else:
		snake_body_deco_corner1.hide()
		snake_body_deco_corner2.hide()
		play_edge_deco_anim_tweens()

func play_edge_deco_anim_tweens():
	await character_select.next_tile_reached
	
	var moving_tween: Tween = create_tween()
	moving_tween.tween_property(snake_body_deco_edge, \"position:y\", - GameConsts.TILE_SIZE, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	snake_body_deco_edge.position = Vector2.ZERO

	play_edge_deco_anim_tweens()
	
func play_corner_deco_anim_tweens():
	await character_select.next_tile_reached
	
	corner_animation_player.seek(0.0, true)
	var moving_tween: Tween = create_tween()
	moving_tween.tween_method(_set_animation_progress, 0.0, corner_animation_player.current_animation_length, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	
	play_corner_deco_anim_tweens()

func _set_animation_progress(time: float):
	corner_animation_player.seek(time, true)
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_0sxtl"]

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_eu485"]
load_path = "res://.godot/imported/GodoticonEdge.svg-7f70a5e692f4a9cf1d543490d1fb54a7.ctex"

[sub_resource type="GDScript" id="GDScript_o1f7t"]
script/source = "class_name SnakeBodyCharSelect extends Sprite2D


enum DIRECTION {UP,RIGHT,DOWN,LEFT,STOP}
enum BODY_TYPE {STRAIGHT_U, STRAIGHT_R, STRAIGHT_D, STRAIGHT_L, CORNER_UR, CORNER_DR, CORNER_DL, CORNER_UL}
@export var is_corner: bool
const snake_body_scene = preload(\"res://Snake/Body/snake_body.tscn\")

var character_select
@onready var snake_body_deco_edge: Sprite2D = $SnakeBodyDecoEdge
@onready var snake_body_deco_corner1: Sprite2D = $SnakeBodyDecoCorner1
@onready var snake_body_deco_corner2: Sprite2D = $SnakeBodyDecoCorner2
@onready var corner_animation_player: AnimationPlayer = $CornerAnimationPlayer

static func new_snakebody(this_direction, next_direction) -> SnakeBody:
	var snake_body: SnakeBody = snake_body_scene.instantiate()
	snake_body.find_correct_rotation(this_direction, next_direction)
	
	return snake_body

func _ready() -> void:
	character_select = get_parent()
	
	if is_corner:
		snake_body_deco_edge.hide()
		play_corner_deco_anim_tweens()
		
	else:
		snake_body_deco_corner1.hide()
		snake_body_deco_corner2.hide()
		play_edge_deco_anim_tweens()

func play_edge_deco_anim_tweens():
	await character_select.next_tile_reached
	
	var moving_tween: Tween = create_tween()
	moving_tween.tween_property(snake_body_deco_edge, \"position:y\", - GameConsts.TILE_SIZE, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	snake_body_deco_edge.position = Vector2.ZERO

	play_edge_deco_anim_tweens()
	
func play_corner_deco_anim_tweens():
	await character_select.next_tile_reached
	
	corner_animation_player.seek(0.0, true)
	var moving_tween: Tween = create_tween()
	moving_tween.tween_method(_set_animation_progress, 0.0, corner_animation_player.current_animation_length, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	
	play_corner_deco_anim_tweens()

func _set_animation_progress(time: float):
	corner_animation_player.seek(time, true)
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dhpph"]

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_c58bg"]
load_path = "res://.godot/imported/GodoticonCorner.svg-4454576a979d8d92d6e56917e0c1bceb.ctex"

[sub_resource type="GDScript" id="GDScript_qbnp5"]
script/source = "class_name SnakeBodyCharSelect extends Sprite2D


enum DIRECTION {UP,RIGHT,DOWN,LEFT,STOP}
enum BODY_TYPE {STRAIGHT_U, STRAIGHT_R, STRAIGHT_D, STRAIGHT_L, CORNER_UR, CORNER_DR, CORNER_DL, CORNER_UL}
@export var is_corner: bool
const snake_body_scene = preload(\"res://Snake/Body/snake_body.tscn\")

var character_select
@onready var snake_body_deco_edge: Sprite2D = $SnakeBodyDecoEdge
@onready var snake_body_deco_corner1: Sprite2D = $SnakeBodyDecoCorner1
@onready var snake_body_deco_corner2: Sprite2D = $SnakeBodyDecoCorner2
@onready var corner_animation_player: AnimationPlayer = $CornerAnimationPlayer

static func new_snakebody(this_direction, next_direction) -> SnakeBody:
	var snake_body: SnakeBody = snake_body_scene.instantiate()
	snake_body.find_correct_rotation(this_direction, next_direction)
	
	return snake_body

func _ready() -> void:
	character_select = get_parent()
	
	if is_corner:
		snake_body_deco_edge.hide()
		play_corner_deco_anim_tweens()
		
	else:
		snake_body_deco_corner1.hide()
		snake_body_deco_corner2.hide()
		play_edge_deco_anim_tweens()

func play_edge_deco_anim_tweens():
	await character_select.next_tile_reached
	
	var moving_tween: Tween = create_tween()
	moving_tween.tween_property(snake_body_deco_edge, \"position:y\", - GameConsts.TILE_SIZE, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	snake_body_deco_edge.position = Vector2.ZERO

	play_edge_deco_anim_tweens()
	
func play_corner_deco_anim_tweens():
	await character_select.next_tile_reached
	
	corner_animation_player.seek(0.0, true)
	var moving_tween: Tween = create_tween()
	moving_tween.tween_method(_set_animation_progress, 0.0, corner_animation_player.current_animation_length, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	
	play_corner_deco_anim_tweens()

func _set_animation_progress(time: float):
	corner_animation_player.seek(time, true)
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_bmlrk"]

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_t31mw"]
load_path = "res://.godot/imported/GodoticonCorner.svg-4454576a979d8d92d6e56917e0c1bceb.ctex"

[sub_resource type="GDScript" id="GDScript_j3jui"]
script/source = "class_name SnakeBodyCharSelect extends Sprite2D


enum DIRECTION {UP,RIGHT,DOWN,LEFT,STOP}
enum BODY_TYPE {STRAIGHT_U, STRAIGHT_R, STRAIGHT_D, STRAIGHT_L, CORNER_UR, CORNER_DR, CORNER_DL, CORNER_UL}
@export var is_corner: bool
const snake_body_scene = preload(\"res://Snake/Body/snake_body.tscn\")

var character_select
@onready var snake_body_deco_edge: Sprite2D = $SnakeBodyDecoEdge
@onready var snake_body_deco_corner1: Sprite2D = $SnakeBodyDecoCorner1
@onready var snake_body_deco_corner2: Sprite2D = $SnakeBodyDecoCorner2
@onready var corner_animation_player: AnimationPlayer = $CornerAnimationPlayer

static func new_snakebody(this_direction, next_direction) -> SnakeBody:
	var snake_body: SnakeBody = snake_body_scene.instantiate()
	snake_body.find_correct_rotation(this_direction, next_direction)
	
	return snake_body

func _ready() -> void:
	character_select = get_parent()
	
	if is_corner:
		snake_body_deco_edge.hide()
		play_corner_deco_anim_tweens()
		
	else:
		snake_body_deco_corner1.hide()
		snake_body_deco_corner2.hide()
		play_edge_deco_anim_tweens()

func play_edge_deco_anim_tweens():
	await character_select.next_tile_reached
	
	var moving_tween: Tween = create_tween()
	moving_tween.tween_property(snake_body_deco_edge, \"position:y\", - GameConsts.TILE_SIZE, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	snake_body_deco_edge.position = Vector2.ZERO

	play_edge_deco_anim_tweens()
	
func play_corner_deco_anim_tweens():
	await character_select.next_tile_reached
	
	corner_animation_player.seek(0.0, true)
	var moving_tween: Tween = create_tween()
	moving_tween.tween_method(_set_animation_progress, 0.0, corner_animation_player.current_animation_length, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	
	play_corner_deco_anim_tweens()

func _set_animation_progress(time: float):
	corner_animation_player.seek(time, true)
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_cwel5"]

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_07068"]
load_path = "res://.godot/imported/GodoticonEdge.svg-7f70a5e692f4a9cf1d543490d1fb54a7.ctex"

[sub_resource type="GDScript" id="GDScript_h3385"]
script/source = "class_name SnakeBodyCharSelect extends Sprite2D


enum DIRECTION {UP,RIGHT,DOWN,LEFT,STOP}
enum BODY_TYPE {STRAIGHT_U, STRAIGHT_R, STRAIGHT_D, STRAIGHT_L, CORNER_UR, CORNER_DR, CORNER_DL, CORNER_UL}
@export var is_corner: bool
const snake_body_scene = preload(\"res://Snake/Body/snake_body.tscn\")

var character_select
@onready var snake_body_deco_edge: Sprite2D = $SnakeBodyDecoEdge
@onready var snake_body_deco_corner1: Sprite2D = $SnakeBodyDecoCorner1
@onready var snake_body_deco_corner2: Sprite2D = $SnakeBodyDecoCorner2
@onready var corner_animation_player: AnimationPlayer = $CornerAnimationPlayer

static func new_snakebody(this_direction, next_direction) -> SnakeBody:
	var snake_body: SnakeBody = snake_body_scene.instantiate()
	snake_body.find_correct_rotation(this_direction, next_direction)
	
	return snake_body

func _ready() -> void:
	character_select = get_parent()
	
	if is_corner:
		snake_body_deco_edge.hide()
		play_corner_deco_anim_tweens()
		
	else:
		snake_body_deco_corner1.hide()
		snake_body_deco_corner2.hide()
		play_edge_deco_anim_tweens()

func play_edge_deco_anim_tweens():
	await character_select.next_tile_reached
	
	var moving_tween: Tween = create_tween()
	moving_tween.tween_property(snake_body_deco_edge, \"position:y\", - GameConsts.TILE_SIZE, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	snake_body_deco_edge.position = Vector2.ZERO

	play_edge_deco_anim_tweens()
	
func play_corner_deco_anim_tweens():
	await character_select.next_tile_reached
	
	corner_animation_player.seek(0.0, true)
	var moving_tween: Tween = create_tween()
	moving_tween.tween_method(_set_animation_progress, 0.0, corner_animation_player.current_animation_length, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	
	play_corner_deco_anim_tweens()

func _set_animation_progress(time: float):
	corner_animation_player.seek(time, true)
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_aoixu"]

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_ashh5"]
load_path = "res://.godot/imported/GodoticonEdge.svg-7f70a5e692f4a9cf1d543490d1fb54a7.ctex"

[sub_resource type="GDScript" id="GDScript_ce477"]
script/source = "class_name SnakeBodyCharSelect extends Sprite2D


enum DIRECTION {UP,RIGHT,DOWN,LEFT,STOP}
enum BODY_TYPE {STRAIGHT_U, STRAIGHT_R, STRAIGHT_D, STRAIGHT_L, CORNER_UR, CORNER_DR, CORNER_DL, CORNER_UL}
@export var is_corner: bool
const snake_body_scene = preload(\"res://Snake/Body/snake_body.tscn\")

var character_select
@onready var snake_body_deco_edge: Sprite2D = $SnakeBodyDecoEdge
@onready var snake_body_deco_corner1: Sprite2D = $SnakeBodyDecoCorner1
@onready var snake_body_deco_corner2: Sprite2D = $SnakeBodyDecoCorner2
@onready var corner_animation_player: AnimationPlayer = $CornerAnimationPlayer

static func new_snakebody(this_direction, next_direction) -> SnakeBody:
	var snake_body: SnakeBody = snake_body_scene.instantiate()
	snake_body.find_correct_rotation(this_direction, next_direction)
	
	return snake_body

func _ready() -> void:
	character_select = get_parent()
	
	if is_corner:
		snake_body_deco_edge.hide()
		play_corner_deco_anim_tweens()
		
	else:
		snake_body_deco_corner1.hide()
		snake_body_deco_corner2.hide()
		play_edge_deco_anim_tweens()

func play_edge_deco_anim_tweens():
	await character_select.next_tile_reached
	
	var moving_tween: Tween = create_tween()
	moving_tween.tween_property(snake_body_deco_edge, \"position:y\", - GameConsts.TILE_SIZE, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	snake_body_deco_edge.position = Vector2.ZERO

	play_edge_deco_anim_tweens()
	
func play_corner_deco_anim_tweens():
	await character_select.next_tile_reached
	
	corner_animation_player.seek(0.0, true)
	var moving_tween: Tween = create_tween()
	moving_tween.tween_method(_set_animation_progress, 0.0, corner_animation_player.current_animation_length, character_select.decreasing_menu_snake_speed).set_trans(Tween.TRANS_LINEAR).set_ease(Tween.EASE_OUT)
	
	play_corner_deco_anim_tweens()

func _set_animation_progress(time: float):
	corner_animation_player.seek(time, true)
"

[node name="MainMenu" type="Node2D"]
script = ExtResource("1_hy30b")

[node name="Background" type="TextureRect" parent="."]
modulate = Color(0.77, 0.77, 0.77, 1)
offset_left = -556.0
offset_top = -492.0
offset_right = 2186.0
offset_bottom = 1240.0
texture = ExtResource("2_3w4mj")
stretch_mode = 1

[node name="NewRun" type="Button" parent="."]
offset_left = 300.0
offset_top = 700.0
offset_right = 921.0
offset_bottom = 901.0
theme_override_font_sizes/font_size = 141
text = "New Run"

[node name="BackgroundScroll" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_po2gx")
}
autoplay = "background_scroll_anim"

[node name="CharacterSelection" type="Node2D" parent="."]
script = ExtResource("3_ajn5b")

[node name="Character1Select" type="TileMapLayer" parent="CharacterSelection"]
self_modulate = Color(0.929412, 0.54902, 0.588235, 1)
clip_children = 2
position = Vector2(1240, 560)
tile_map_data = PackedByteArray("AAD9////AQABAAIAAAD+////AQABAAAAAAD/////AQACAAAAAAD//wAAAQAAAAMAAAAAAAAAAQABAAAAAAABAAAAAQABAAAAAAACAAAAAQABAAAAAAADAAAAAQABAAMAAAA=")
tile_set = SubResource("TileSet_iej5p")
rendering_quadrant_size = 100
script = SubResource("GDScript_id3bs")

[node name="Area1" type="Area2D" parent="CharacterSelection/Character1Select"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="CharacterSelection/Character1Select/Area1"]
position = Vector2(0, 100)
polygon = PackedVector2Array(-80, -20, 320, -20, 320, -100, 0, -100, 0, -180, -240, -180, -240, -100, -80, -100)

[node name="Path2D" type="Path2D" parent="CharacterSelection/Character1Select"]
curve = SubResource("Curve2D_b3er0")

[node name="TailFollow" type="PathFollow2D" parent="CharacterSelection/Character1Select/Path2D"]
position = Vector2(-120, 40)
rotation = 3.14159
progress = 80.0

[node name="SnakeTail" type="Sprite2D" parent="CharacterSelection/Character1Select/Path2D/TailFollow"]
z_index = 20
z_as_relative = false
rotation = 1.5708
texture = SubResource("CompressedTexture2D_qmlj8")

[node name="HeadFollow" type="PathFollow2D" parent="CharacterSelection/Character1Select/Path2D"]
position = Vector2(-39.9963, -120)
progress = 640.0

[node name="SnakeHead" type="Sprite2D" parent="CharacterSelection/Character1Select/Path2D/HeadFollow"]
z_index = 20
rotation = 1.5708
texture = SubResource("CompressedTexture2D_e240q")

[node name="Mask" type="Sprite2D" parent="CharacterSelection/Character1Select"]
clip_children = 1
position = Vector2(40, 0)
texture = ExtResource("8_qmlj8")

[node name="SnakeBody7" type="Sprite2D" parent="CharacterSelection/Character1Select" groups=["Snake"]]
clip_children = 2
z_index = 10
z_as_relative = false
material = SubResource("ShaderMaterial_dbhad")
position = Vector2(280, 40)
rotation = -1.57079
texture = SubResource("CompressedTexture2D_5x28t")
script = SubResource("GDScript_gcf2c")

[node name="SnakeBodyDecoEdge" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody7"]
material = SubResource("ShaderMaterial_81x6j")
texture = ExtResource("15_a07ub")
offset = Vector2(0, 40)

[node name="SnakeBodyDecoCorner1" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody7"]
material = SubResource("ShaderMaterial_jq760")
rotation = 0.785398
texture = ExtResource("16_0sxtl")

[node name="SnakeBodyDecoCorner2" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody7"]
material = SubResource("ShaderMaterial_81x6j")
position = Vector2(0, -80)
texture = ExtResource("16_0sxtl")

[node name="CornerAnimationPlayer" type="AnimationPlayer" parent="CharacterSelection/Character1Select/SnakeBody7"]
libraries = {
&"": SubResource("AnimationLibrary_m5mbj")
}
autoplay = "move_tile_anim"

[node name="SnakeBody6" type="Sprite2D" parent="CharacterSelection/Character1Select" groups=["Snake"]]
clip_children = 2
z_index = 10
z_as_relative = false
material = SubResource("ShaderMaterial_t5loh")
position = Vector2(200, 40)
rotation = -1.5708
texture = SubResource("CompressedTexture2D_8wefa")
script = SubResource("GDScript_cqjde")

[node name="SnakeBodyDecoEdge" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody6"]
material = SubResource("ShaderMaterial_81x6j")
texture = ExtResource("15_a07ub")
offset = Vector2(0, 40)

[node name="SnakeBodyDecoCorner1" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody6"]
material = SubResource("ShaderMaterial_jq760")
rotation = 0.785398
texture = ExtResource("16_0sxtl")

[node name="SnakeBodyDecoCorner2" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody6"]
material = SubResource("ShaderMaterial_81x6j")
position = Vector2(0, -80)
texture = ExtResource("16_0sxtl")

[node name="CornerAnimationPlayer" type="AnimationPlayer" parent="CharacterSelection/Character1Select/SnakeBody6"]
libraries = {
&"": SubResource("AnimationLibrary_m5mbj")
}
autoplay = "move_tile_anim"

[node name="SnakeBody5" type="Sprite2D" parent="CharacterSelection/Character1Select" groups=["Snake"]]
clip_children = 2
z_index = 10
z_as_relative = false
material = SubResource("ShaderMaterial_homfb")
position = Vector2(120, 40)
rotation = -1.57079
texture = SubResource("CompressedTexture2D_wbgrs")
script = SubResource("GDScript_a07ub")

[node name="SnakeBodyDecoEdge" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody5"]
material = SubResource("ShaderMaterial_81x6j")
texture = ExtResource("15_a07ub")
offset = Vector2(0, 40)

[node name="SnakeBodyDecoCorner1" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody5"]
material = SubResource("ShaderMaterial_jq760")
rotation = 0.785398
texture = ExtResource("16_0sxtl")

[node name="SnakeBodyDecoCorner2" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody5"]
material = SubResource("ShaderMaterial_81x6j")
position = Vector2(0, -80)
texture = ExtResource("16_0sxtl")

[node name="CornerAnimationPlayer" type="AnimationPlayer" parent="CharacterSelection/Character1Select/SnakeBody5"]
libraries = {
&"": SubResource("AnimationLibrary_m5mbj")
}
autoplay = "move_tile_anim"

[node name="SnakeBody4" type="Sprite2D" parent="CharacterSelection/Character1Select" groups=["Snake"]]
clip_children = 2
z_index = 10
z_as_relative = false
material = SubResource("ShaderMaterial_0sxtl")
position = Vector2(40, 40)
rotation = -1.57079
texture = SubResource("CompressedTexture2D_eu485")
script = SubResource("GDScript_o1f7t")

[node name="SnakeBodyDecoEdge" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody4"]
material = SubResource("ShaderMaterial_81x6j")
texture = ExtResource("15_a07ub")
offset = Vector2(0, 40)

[node name="SnakeBodyDecoCorner1" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody4"]
material = SubResource("ShaderMaterial_jq760")
rotation = 0.785398
texture = ExtResource("16_0sxtl")

[node name="SnakeBodyDecoCorner2" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody4"]
material = SubResource("ShaderMaterial_81x6j")
position = Vector2(0, -80)
texture = ExtResource("16_0sxtl")

[node name="CornerAnimationPlayer" type="AnimationPlayer" parent="CharacterSelection/Character1Select/SnakeBody4"]
libraries = {
&"": SubResource("AnimationLibrary_m5mbj")
}
autoplay = "move_tile_anim"

[node name="SnakeBody3" type="Sprite2D" parent="CharacterSelection/Character1Select" groups=["Snake"]]
clip_children = 2
z_index = 10
z_as_relative = false
material = SubResource("ShaderMaterial_dhpph")
position = Vector2(-40, 40)
rotation = 3.14159
scale = Vector2(1, -1)
texture = SubResource("CompressedTexture2D_c58bg")
script = SubResource("GDScript_qbnp5")

[node name="SnakeBodyDecoEdge" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody3"]
material = SubResource("ShaderMaterial_81x6j")
texture = ExtResource("15_a07ub")
offset = Vector2(0, 40)

[node name="SnakeBodyDecoCorner1" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody3"]
material = SubResource("ShaderMaterial_jq760")
rotation = 0.785398
texture = ExtResource("16_0sxtl")

[node name="SnakeBodyDecoCorner2" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody3"]
material = SubResource("ShaderMaterial_81x6j")
position = Vector2(0, -80)
texture = ExtResource("16_0sxtl")

[node name="CornerAnimationPlayer" type="AnimationPlayer" parent="CharacterSelection/Character1Select/SnakeBody3"]
libraries = {
&"": SubResource("AnimationLibrary_m5mbj")
}
autoplay = "move_tile_anim"

[node name="SnakeBody2" type="Sprite2D" parent="CharacterSelection/Character1Select" groups=["Snake"]]
clip_children = 2
z_index = 10
z_as_relative = false
material = SubResource("ShaderMaterial_bmlrk")
position = Vector2(-40, -40)
rotation = -1.5708
texture = SubResource("CompressedTexture2D_t31mw")
script = SubResource("GDScript_j3jui")

[node name="SnakeBodyDecoEdge" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody2"]
material = SubResource("ShaderMaterial_81x6j")
texture = ExtResource("15_a07ub")
offset = Vector2(0, 40)

[node name="SnakeBodyDecoCorner1" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody2"]
material = SubResource("ShaderMaterial_jq760")
rotation = 0.785398
texture = ExtResource("16_0sxtl")

[node name="SnakeBodyDecoCorner2" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody2"]
material = SubResource("ShaderMaterial_81x6j")
position = Vector2(0, -80)
texture = ExtResource("16_0sxtl")

[node name="CornerAnimationPlayer" type="AnimationPlayer" parent="CharacterSelection/Character1Select/SnakeBody2"]
libraries = {
&"": SubResource("AnimationLibrary_m5mbj")
}
autoplay = "move_tile_anim"

[node name="SnakeBody1" type="Sprite2D" parent="CharacterSelection/Character1Select" groups=["Snake"]]
clip_children = 2
z_index = 10
z_as_relative = false
material = SubResource("ShaderMaterial_cwel5")
position = Vector2(-120, -40)
rotation = -1.57079
texture = SubResource("CompressedTexture2D_07068")
script = SubResource("GDScript_h3385")

[node name="SnakeBodyDecoEdge" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody1"]
material = SubResource("ShaderMaterial_81x6j")
texture = ExtResource("15_a07ub")
offset = Vector2(0, 40)

[node name="SnakeBodyDecoCorner1" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody1"]
material = SubResource("ShaderMaterial_jq760")
rotation = 0.785398
texture = ExtResource("16_0sxtl")

[node name="SnakeBodyDecoCorner2" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody1"]
material = SubResource("ShaderMaterial_81x6j")
position = Vector2(0, -80)
texture = ExtResource("16_0sxtl")

[node name="CornerAnimationPlayer" type="AnimationPlayer" parent="CharacterSelection/Character1Select/SnakeBody1"]
libraries = {
&"": SubResource("AnimationLibrary_m5mbj")
}
autoplay = "move_tile_anim"

[node name="SnakeBody0" type="Sprite2D" parent="CharacterSelection/Character1Select" groups=["Snake"]]
clip_children = 2
z_index = 10
z_as_relative = false
material = SubResource("ShaderMaterial_aoixu")
position = Vector2(-200, -40)
rotation = -1.57079
texture = SubResource("CompressedTexture2D_ashh5")
script = SubResource("GDScript_ce477")

[node name="SnakeBodyDecoEdge" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody0"]
material = SubResource("ShaderMaterial_81x6j")
texture = ExtResource("15_a07ub")
offset = Vector2(0, 40)

[node name="SnakeBodyDecoCorner1" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody0"]
material = SubResource("ShaderMaterial_jq760")
rotation = 0.785398
texture = ExtResource("16_0sxtl")

[node name="SnakeBodyDecoCorner2" type="Sprite2D" parent="CharacterSelection/Character1Select/SnakeBody0"]
material = SubResource("ShaderMaterial_81x6j")
position = Vector2(0, -80)
texture = ExtResource("16_0sxtl")

[node name="CornerAnimationPlayer" type="AnimationPlayer" parent="CharacterSelection/Character1Select/SnakeBody0"]
libraries = {
&"": SubResource("AnimationLibrary_m5mbj")
}
autoplay = "move_tile_anim"

[connection signal="pressed" from="NewRun" to="." method="_on_new_run_pressed"]
[connection signal="mouse_entered" from="CharacterSelection/Character1Select/Area1" to="CharacterSelection" method="_on_area_1_mouse_entered"]
[connection signal="mouse_exited" from="CharacterSelection/Character1Select/Area1" to="CharacterSelection" method="_on_area_1_mouse_exited"]
